{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport XLSX from 'xlsx';\nimport matchSorter from 'match-sorter';\nimport { FiMoreHorizontal } from 'react-icons/fi';\nimport { FaCloudUploadAlt } from 'react-icons/fa';\nimport { SiMinutemailer } from 'react-icons/si';\nimport { MdMore } from 'react-icons/md';\nimport Layout from '@components/layout/Layout';\nimport TableComponent, { useAsyncDebounce } from '@components/Table';\nimport makeData from '@utils/helpers';\nimport Checkbox from '@components/Checkbox';\nimport Dropdown from '@components/Dropdown';\nimport Button from '@components/Button';\nimport UploadComponent from '@components/FileUpload';\nvar editableFields = ['firstName', 'lastName', 'email'];\n\nvar headerSearch = function headerSearch() {\n  return __jsx(\"div\", {\n    className: \"flex justify-start\",\n    style: {\n      width: '55%'\n    }\n  }, __jsx(\"p\", null, \"an header search here\"));\n};\n\nfunction fuzzyTextFilterFn(rows, id, filterValue) {\n  return matchSorter(rows, filterValue, {\n    keys: [function (row) {\n      return row.values[id];\n    }]\n  });\n} // Let the table remove the filter if the string is empty\n\n\nfuzzyTextFilterFn.autoRemove = function (val) {\n  return !val;\n}; // Create an editable cell renderer\n\n\nvar EditableCell = function EditableCell(_ref) {\n  _s();\n\n  var initialValue = _ref.value,\n      index = _ref.row.index,\n      id = _ref.column.id,\n      updateData = _ref.updateData;\n\n  // We need to keep and update the state of the cell normally\n  var _useState = useState(initialValue),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var onChange = function onChange(e) {\n    setValue(e.target.value);\n  }; // We'll only update the external data when the input is blurred\n\n\n  var onBlur = function onBlur() {\n    updateData(index, id, value);\n  }; // If the initialValue is changed external, sync it up with our state\n\n\n  useEffect(function () {\n    setValue(initialValue);\n  }, [initialValue]);\n  return editableFields.includes(id) ? __jsx(\"input\", {\n    value: value,\n    onChange: onChange,\n    onBlur: onBlur,\n    className: \"w-full bg-transparent focus:bg-white\"\n  }) : __jsx(\"div\", {\n    className: \"\"\n  }, value);\n}; // Define a default UI for filtering\n\n\n_s(EditableCell, \"tWiMN+R1KrlPc+I/v9D+hnPBFtc=\");\n\n_c = EditableCell;\n\nfunction GlobalFilter(_ref2) {\n  _s2();\n\n  var preGlobalFilteredRows = _ref2.preGlobalFilteredRows,\n      globalFilter = _ref2.globalFilter,\n      setGlobalFilter = _ref2.setGlobalFilter;\n  var count = preGlobalFilteredRows.length;\n\n  var _useState2 = useState(globalFilter),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  var _onChange = useAsyncDebounce(function (value) {\n    setGlobalFilter(value || undefined);\n  }, 200);\n\n  return __jsx(\"span\", null, \"Search:\", ' ', __jsx(\"input\", {\n    value: value || '',\n    onChange: function onChange(e) {\n      setValue(e.target.value);\n\n      _onChange(e.target.value);\n    },\n    placeholder: \"\".concat(count, \" records...\"),\n    style: {\n      fontSize: '1.1rem',\n      border: '0'\n    }\n  }));\n} // Define a UI for filtering\n\n\n_s2(GlobalFilter, \"u76gItWTPW4jhTYSCcNG7/LfbyA=\", false, function () {\n  return [useAsyncDebounce];\n});\n\n_c2 = GlobalFilter;\n\nfunction DefaultColumnFilter(_ref3) {\n  var _ref3$column = _ref3.column,\n      filterValue = _ref3$column.filterValue,\n      preFilteredRows = _ref3$column.preFilteredRows,\n      setFilter = _ref3$column.setFilter;\n  var count = preFilteredRows.length;\n  return __jsx(\"input\", {\n    value: filterValue || '',\n    onChange: function onChange(e) {\n      setFilter(e.target.value || undefined); // Set undefined to remove the filter entirely\n    },\n    placeholder: \"Search \".concat(count, \" records...\")\n  });\n}\n\n_c3 = DefaultColumnFilter;\n\nvar sendInvite = function sendInvite(e, data) {\n  e.stopPropagation();\n  console.log('we are sending the invite to', data);\n};\n\nvar IndexPage = function IndexPage() {\n  _s3();\n\n  var _useState3 = useState(function () {\n    return makeData(2);\n  }),\n      data = _useState3[0],\n      setData = _useState3[1];\n\n  var _useState4 = useState(null),\n      fileUploaded = _useState4[0],\n      setFileUploaded = _useState4[1];\n\n  var columns = useMemo(function () {\n    return [{\n      Header: 'Table',\n      columns: [{\n        Header: 'First Name',\n        accessor: 'firstName'\n      }, {\n        Header: 'Last Name',\n        accessor: 'lastName'\n      }, {\n        Header: 'Email',\n        accessor: 'email'\n      }]\n    }, {\n      Header: 'Test Info',\n      columns: [{\n        Header: 'Invite Sent',\n        accessor: 'inviteSent'\n      }, {\n        Header: 'Test Sent',\n        accessor: 'testSent'\n      }, {\n        Header: 'Test Status',\n        accessor: 'testStatus'\n      }]\n    }];\n  }, []);\n  var spring = React.useMemo(function () {\n    return {\n      type: 'spring',\n      damping: 50,\n      stiffness: 100\n    };\n  }, []);\n  var filterTypes = useMemo(function () {\n    return {\n      // Add a new fuzzyTextFilterFn filter type.\n      fuzzyText: fuzzyTextFilterFn,\n      // Or, override the default text filter to use\n      // \"startWith\"\n      text: function text(rows, id, filterValue) {\n        return rows.filter(function (row) {\n          var rowValue = row.values[id];\n          return rowValue !== undefined ? String(rowValue).toLowerCase().startsWith(String(filterValue).toLowerCase()) : true;\n        });\n      }\n    };\n  }, []);\n\n  var uploadDatabase = function uploadDatabase(file, type) {\n    switch (type) {\n      case 'spreadsheet':\n        //  var first_worksheet = workbook.Sheets[workbook.SheetNames[0]]\n        // var data = XLSX.utils.sheet_to_json(first_worksheet, { header: 1 })\n        // /* convert from array of arrays to workbook */\n        // var worksheet = XLSX.utils.aoa_to_sheet(data)\n        // var new_workbook = XLSX.utils.book_new()\n        // XLSX.utils.book_append_sheet(new_workbook, worksheet, 'SheetJS')\n        var f = file.selectedFile[0];\n        var reader = new FileReader();\n        var stateData = data;\n\n        reader.onload = function (e) {\n          var data = e.target.result;\n          var readedData = XLSX.read(data, {\n            type: 'binary'\n          });\n          var wsname = readedData.SheetNames[0];\n          var ws = readedData.Sheets[wsname];\n          /* Convert array to json*/\n          // const dataParse = XLSX.utils.sheet_to_json(ws, { header: 1 })\n\n          var dataParse = XLSX.utils.sheet_to_json(ws, {\n            raw: true\n          });\n          var fieldNames = ['Serial No', 'firstName', 'lastName', 'email', 'inviteSent', 'testSent', 'testStatus', 'subRows'];\n          var newDataSet = dataParse.map(function (d) {\n            var pos = Object.keys(d);\n            fieldNames.forEach(function (name, i) {\n              if (name !== 'Serial No') {\n                d[name] = d[name] || d[pos[i]] || '';\n                d[name] = String(d[name]);\n              }\n\n              if (name === 'subRows') d[name] = undefined;\n            });\n            return d;\n          });\n          var update = newDataSet.concat(stateData);\n          setData(update);\n        };\n\n        reader.readAsBinaryString(f);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  var defaultColumn = React.useMemo(function () {\n    return {\n      // Let's set up our Filter UI\n      Filter: DefaultColumnFilter,\n      Cell: EditableCell\n    };\n  }, []);\n\n  var renderTableSelect = function renderTableSelect(hooks) {\n    hooks.visibleColumns.push(function (columns) {\n      return [// Let's make a column for selection\n      {\n        id: 'selection',\n        // The header can use the table's getToggleAllRowsSelectedProps method\n        // to render a checkbox\n        Header: function Header(_ref4) {\n          var getToggleAllPageRowsSelectedProps = _ref4.getToggleAllPageRowsSelectedProps;\n          return __jsx(\"div\", null, __jsx(Checkbox, getToggleAllPageRowsSelectedProps()));\n        },\n        // The cell can use the individual row's getToggleRowSelectedProps method\n        // to the render a checkbox\n        Cell: function Cell(_ref5) {\n          var row = _ref5.row;\n          return __jsx(\"div\", null, __jsx(Checkbox, row.getToggleRowSelectedProps()));\n        }\n      }].concat(_toConsumableArray(columns));\n    });\n  };\n\n  var renderTableHeader = function renderTableHeader(column) {\n    var header = column.render('Header');\n    return __jsx(React.Fragment, null, header);\n  };\n\n  var renderTableRow = function renderTableRow(page, prepareRow) {\n    var renderTableCell = function renderTableCell(cell) {\n      if (cell.column.id === 'inviteSent') {\n        var _cell$row, _cell$row$values, _cell$row$values$invi;\n\n        if (((_cell$row = cell.row) === null || _cell$row === void 0 ? void 0 : (_cell$row$values = _cell$row.values) === null || _cell$row$values === void 0 ? void 0 : (_cell$row$values$invi = _cell$row$values.inviteSent) === null || _cell$row$values$invi === void 0 ? void 0 : _cell$row$values$invi.toLowerCase()) === 'no') return __jsx(\"div\", {\n          className: \"z-50 inline-flex items-center justify-center w-full h-full align-middle group\"\n        }, __jsx(\"span\", {\n          className: \"text-red-600\"\n        }, cell.render('Cell')), __jsx(\"span\", {\n          className: \"hidden align-middle group-focus:flex group-hover:flex align-center\"\n        }, __jsx(Dropdown, {\n          buttonLabel: __jsx(FiMoreHorizontal, {\n            className: \"flex self-center opacity-50\"\n          }),\n          className: \"z-20 ml-4\"\n        }, __jsx(\"ul\", {\n          className: \"w-40 py-2 space-y-4 text-sm\"\n        }, __jsx(\"li\", null, __jsx(\"span\", {\n          className: \"cursor-pointer text-primary hover:underline\",\n          title: \"components\",\n          onClick: function onClick(e) {\n            return sendInvite(e, cell.row.values);\n          }\n        }, __jsx(SiMinutemailer, {\n          className: \"inline ml-6 mr-4\"\n        }), \"Send Invite\")), __jsx(\"li\", null, __jsx(\"hr\", {\n          className: \"dark:border-gray-700\"\n        })), __jsx(\"li\", {\n          className: \"cursor-not-allowed\"\n        }, __jsx(\"span\", {\n          className: \"text-primary hover:underline\",\n          title: \"Typography\"\n        }, __jsx(MdMore, {\n          className: \"inline ml-6 mr-4 \"\n        }), \"More Options\"))))));else return __jsx(\"div\", {\n          className: \"inline-flex items-center justify-center w-full align-middle group\"\n        }, __jsx(\"span\", {\n          className: \"text-green-600\"\n        }, cell.render('Cell')));\n      }\n\n      if (cell.column.id === 'testSent') {\n        var _cell$row$values2, _cell$row$values2$tes;\n\n        if (((_cell$row$values2 = cell.row.values) === null || _cell$row$values2 === void 0 ? void 0 : (_cell$row$values2$tes = _cell$row$values2.testSent) === null || _cell$row$values2$tes === void 0 ? void 0 : _cell$row$values2$tes.toLowerCase()) === 'no') return __jsx(\"div\", {\n          className: \"inline-flex items-center justify-center w-full text-red-600\"\n        }, cell.render('Cell'));else return __jsx(\"div\", {\n          className: \"inline-flex items-center justify-center w-full text-green-600\"\n        }, cell.render('Cell'));\n      }\n\n      if (cell.column.id === 'testStatus') {\n        var _cell$row2, _cell$row2$values, _cell$row2$values$tes;\n\n        if (((_cell$row2 = cell.row) === null || _cell$row2 === void 0 ? void 0 : (_cell$row2$values = _cell$row2.values) === null || _cell$row2$values === void 0 ? void 0 : (_cell$row2$values$tes = _cell$row2$values.testStatus) === null || _cell$row2$values$tes === void 0 ? void 0 : _cell$row2$values$tes.toLowerCase()) === 'pending') return __jsx(\"div\", {\n          className: \"inline-flex items-center justify-center w-full text-yellow-700\"\n        }, cell.render('Cell'));else return __jsx(\"div\", {\n          className: \"inline-flex items-center justify-center w-full text-green-600\"\n        }, cell.render('Cell'));\n      }\n\n      return cell.render('Cell');\n    };\n\n    return __jsx(React.Fragment, null, page.map(function (row, i) {\n      prepareRow(row);\n      return __jsx(motion.tr, _extends({}, row.getRowProps({\n        layoutTransition: spring,\n        exit: {\n          opacity: 0,\n          maxHeight: 0\n        }\n      }), {\n        className: \"\".concat(i % 2 ? '' : '', \" h-16\")\n      }), row.cells.map(function (cell, i) {\n        return __jsx(motion.td, _extends({}, cell.getCellProps({\n          layoutTransition: spring\n        }), {\n          className: \"\".concat(i % 2 ? 'bg-gray-5' : '', \" h-16\")\n        }), renderTableCell ? renderTableCell(cell) : cell.render('Cell'));\n      }));\n    }));\n  };\n\n  var handleBatchActions = function handleBatchActions(controls) {\n    var tableState = controls.state,\n        selectedFlatRows = controls.selectedFlatRows;\n    var selectedRowIds = tableState.selectedRowIds;\n    var selectedLen = Object.keys(selectedRowIds || {}).length;\n    var selectedMembers = selectedFlatRows.map(function (d) {\n      return d.original;\n    });\n    var uninvitedMembers = selectedMembers.filter(function (d) {\n      var _d$testSent;\n\n      return ((_d$testSent = d['testSent']) === null || _d$testSent === void 0 ? void 0 : _d$testSent.toLowerCase()) !== 'no';\n    });\n    var uninvitedLen = uninvitedMembers.length;\n    return __jsx(\"div\", {\n      className: \"flex \".concat(selectedLen ? 'justify-between' : 'justify-end', \" w-full mb-2\")\n    }, selectedLen > 0 && __jsx(React.Fragment, null, __jsx(\"p\", null, \"You have selected \", selectedLen, \" members\"), uninvitedLen > 0 && __jsx(\"div\", null, __jsx(Button, {\n      onClick: function onClick(e) {\n        return sendInvite(e, uninvitedMembers);\n      }\n    }, \"Send Invitation to \", uninvitedLen, \" members\"))), !selectedLen && __jsx(React.Fragment, null, __jsx(UploadComponent, {\n      allowedExtensions: ['xls', 'xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'] // autoUpload={true}\n      ,\n      render: function render(el) {\n        return __jsx(\"span\", {\n          className: \"flex justify-end w-full px-4 py-2 border cursor-pointer hover:text-primary-lighter hover:border-primary-darker text-primary\",\n          onClick: function onClick(e) {\n            e.preventDefault();\n            el && el.click();\n          }\n        }, __jsx(FaCloudUploadAlt, {\n          className: \"w-6 h-6 mr-2\"\n        }), \"Upload SpreadSheet\");\n      },\n      uploadHandler: function uploadHandler(data, state, cb) {\n        uploadDatabase(state, 'spreadsheet');\n      }\n    })));\n  };\n\n  return __jsx(Layout, {\n    title: \"Your Awesome App\",\n    className: \"container max-w-5xl py-8 overflow-auto\",\n    header: headerSearch()\n  }, __jsx(\"p\", {\n    className: \"mb-4 text-lg font-light\"\n  }, \"Demo spreadsheet upload and email list system.\"), __jsx(\"div\", null, __jsx(TableComponent, {\n    columns: columns,\n    data: data,\n    setData: setData,\n    tableClassName: \"w-full\",\n    filterTypes: filterTypes,\n    defaultColumn: defaultColumn,\n    globalFilter: {\n      use: false,\n      Component: GlobalFilter\n    },\n    renderHeader: renderTableHeader // renderFilter= {(column: unknown) => JSX.Element}\n    // renderTableBody={renderTableBody}\n    ,\n    renderTableRow: renderTableRow // renderTableCell= {(cell: unknown) => JSX.Element}\n    ,\n    handleTableControls: {\n      jsx: handleBatchActions\n    },\n    customHook: renderTableSelect\n  })));\n};\n\n_s3(IndexPage, \"5Z49VHna6qVyb8+wdfMyXqI5204=\");\n\n_c4 = IndexPage;\nexport default IndexPage;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"EditableCell\");\n$RefreshReg$(_c2, \"GlobalFilter\");\n$RefreshReg$(_c3, \"DefaultColumnFilter\");\n$RefreshReg$(_c4, \"IndexPage\");","map":{"version":3,"sources":["/mnt/c/Users/arash/Documents/DevInDoc/Getaboard/demoEmail/reward-test/pages/index.tsx"],"names":["React","useEffect","useMemo","useState","motion","XLSX","matchSorter","FiMoreHorizontal","FaCloudUploadAlt","SiMinutemailer","MdMore","Layout","TableComponent","useAsyncDebounce","makeData","Checkbox","Dropdown","Button","UploadComponent","editableFields","headerSearch","width","fuzzyTextFilterFn","rows","id","filterValue","keys","row","values","autoRemove","val","EditableCell","initialValue","value","index","column","updateData","setValue","onChange","e","target","onBlur","includes","GlobalFilter","preGlobalFilteredRows","globalFilter","setGlobalFilter","count","length","undefined","fontSize","border","DefaultColumnFilter","preFilteredRows","setFilter","sendInvite","data","stopPropagation","console","log","IndexPage","setData","fileUploaded","setFileUploaded","columns","Header","accessor","spring","type","damping","stiffness","filterTypes","fuzzyText","text","filter","rowValue","String","toLowerCase","startsWith","uploadDatabase","file","f","selectedFile","reader","FileReader","stateData","onload","result","readedData","read","wsname","SheetNames","ws","Sheets","dataParse","utils","sheet_to_json","raw","fieldNames","newDataSet","map","d","pos","Object","forEach","name","i","update","concat","readAsBinaryString","defaultColumn","Filter","Cell","renderTableSelect","hooks","visibleColumns","push","getToggleAllPageRowsSelectedProps","getToggleRowSelectedProps","renderTableHeader","header","render","renderTableRow","page","prepareRow","renderTableCell","cell","inviteSent","testSent","testStatus","getRowProps","layoutTransition","exit","opacity","maxHeight","cells","getCellProps","handleBatchActions","controls","tableState","state","selectedFlatRows","selectedRowIds","selectedLen","selectedMembers","original","uninvitedMembers","uninvitedLen","el","preventDefault","click","cb","use","Component","jsx"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useState } from 'react'\nimport { NextPage } from 'next'\nimport { motion } from 'framer-motion'\nimport XLSX from 'xlsx'\nimport matchSorter from 'match-sorter'\nimport { ToastContainer, toast } from 'react-toastify'\n\nimport { FiArrowRight, FiMoreHorizontal } from 'react-icons/fi'\nimport { FaCloudUploadAlt } from 'react-icons/fa'\nimport { SiMinutemailer } from 'react-icons/si'\nimport { MdMore } from 'react-icons/md'\nimport Layout from '@components/layout/Layout'\nimport TableComponent, { useAsyncDebounce } from '@components/Table'\nimport makeData from '@utils/helpers'\nimport Checkbox from '@components/Checkbox'\nimport Dropdown from '@components/Dropdown'\nimport Button from '@components/Button'\nimport UploadComponent from '@components/FileUpload'\n\nconst editableFields = ['firstName', 'lastName', 'email']\n\nconst headerSearch = () => {\n  return (\n    <div className=\"flex justify-start\" style={{ width: '55%' }}>\n      <p>an header search here</p>\n    </div>\n  )\n}\n\nfunction fuzzyTextFilterFn(rows, id, filterValue) {\n  return matchSorter(rows, filterValue, { keys: [(row) => row.values[id]] })\n}\n\n// Let the table remove the filter if the string is empty\nfuzzyTextFilterFn.autoRemove = (val) => !val\n\n// Create an editable cell renderer\nconst EditableCell = ({\n  value: initialValue,\n  row: { index },\n  column: { id },\n  updateData, // This is a custom function that we supplied to our table instance\n}) => {\n  // We need to keep and update the state of the cell normally\n  const [value, setValue] = useState(initialValue)\n\n  const onChange = (e) => {\n    setValue(e.target.value)\n  }\n\n  // We'll only update the external data when the input is blurred\n  const onBlur = () => {\n    updateData(index, id, value)\n  }\n\n  // If the initialValue is changed external, sync it up with our state\n  useEffect(() => {\n    setValue(initialValue)\n  }, [initialValue])\n\n  return editableFields.includes(id) ? (\n    <input\n      value={value}\n      onChange={onChange}\n      onBlur={onBlur}\n      className=\"w-full bg-transparent focus:bg-white\"\n    />\n  ) : (\n    <div className=\"\">{value}</div>\n  )\n}\n\n// Define a default UI for filtering\nfunction GlobalFilter({\n  preGlobalFilteredRows,\n  globalFilter,\n  setGlobalFilter,\n}) {\n  const count = preGlobalFilteredRows.length\n  const [value, setValue] = useState(globalFilter)\n  const onChange = useAsyncDebounce((value) => {\n    setGlobalFilter(value || undefined)\n  }, 200)\n\n  return (\n    <span>\n      Search:{' '}\n      <input\n        value={value || ''}\n        onChange={(e) => {\n          setValue(e.target.value)\n          onChange(e.target.value)\n        }}\n        placeholder={`${count} records...`}\n        style={{\n          fontSize: '1.1rem',\n          border: '0',\n        }}\n      />\n    </span>\n  )\n}\n\n// Define a UI for filtering\nfunction DefaultColumnFilter({\n  column: { filterValue, preFilteredRows, setFilter },\n}) {\n  const count = preFilteredRows.length\n\n  return (\n    <input\n      value={filterValue || ''}\n      onChange={(e) => {\n        setFilter(e.target.value || undefined) // Set undefined to remove the filter entirely\n      }}\n      placeholder={`Search ${count} records...`}\n    />\n  )\n}\n\nconst sendInvite = (e, data) => {\n  e.stopPropagation()\n  console.log('we are sending the invite to', data)\n}\n\nconst IndexPage: NextPage = () => {\n  const [data, setData] = useState(() => makeData(2))\n  const [fileUploaded, setFileUploaded] = useState(null)\n  const columns = useMemo(\n    () => [\n      {\n        Header: 'Table',\n        columns: [\n          {\n            Header: 'First Name',\n            accessor: 'firstName',\n          },\n          {\n            Header: 'Last Name',\n            accessor: 'lastName',\n          },\n          {\n            Header: 'Email',\n            accessor: 'email',\n          },\n        ],\n      },\n      {\n        Header: 'Test Info',\n        columns: [\n          {\n            Header: 'Invite Sent',\n            accessor: 'inviteSent',\n          },\n          {\n            Header: 'Test Sent',\n            accessor: 'testSent',\n          },\n          {\n            Header: 'Test Status',\n            accessor: 'testStatus',\n          },\n        ],\n      },\n    ],\n    []\n  )\n  const spring = React.useMemo(\n    () => ({\n      type: 'spring',\n      damping: 50,\n      stiffness: 100,\n    }),\n    []\n  )\n  const filterTypes = useMemo(\n    () => ({\n      // Add a new fuzzyTextFilterFn filter type.\n      fuzzyText: fuzzyTextFilterFn,\n      // Or, override the default text filter to use\n      // \"startWith\"\n      text: (rows, id, filterValue) => {\n        return rows.filter((row) => {\n          const rowValue = row.values[id]\n          return rowValue !== undefined\n            ? String(rowValue)\n                .toLowerCase()\n                .startsWith(String(filterValue).toLowerCase())\n            : true\n        })\n      },\n    }),\n    []\n  )\n\n  const uploadDatabase = (file, type) => {\n    switch (type) {\n      case 'spreadsheet':\n        //  var first_worksheet = workbook.Sheets[workbook.SheetNames[0]]\n        // var data = XLSX.utils.sheet_to_json(first_worksheet, { header: 1 })\n\n        // /* convert from array of arrays to workbook */\n        // var worksheet = XLSX.utils.aoa_to_sheet(data)\n        // var new_workbook = XLSX.utils.book_new()\n        // XLSX.utils.book_append_sheet(new_workbook, worksheet, 'SheetJS')\n        const f = file.selectedFile[0]\n        const reader = new FileReader()\n        const stateData = data\n        reader.onload = function (e) {\n          const data = e.target.result\n          const readedData = XLSX.read(data, { type: 'binary' })\n          const wsname = readedData.SheetNames[0]\n          const ws = readedData.Sheets[wsname]\n\n          /* Convert array to json*/\n          // const dataParse = XLSX.utils.sheet_to_json(ws, { header: 1 })\n          const dataParse = XLSX.utils.sheet_to_json(ws, { raw: true })\n\n          const fieldNames = [\n            'Serial No',\n            'firstName',\n            'lastName',\n            'email',\n            'inviteSent',\n            'testSent',\n            'testStatus',\n            'subRows',\n          ]\n          const newDataSet = dataParse.map((d) => {\n            const pos = Object.keys(d)\n            fieldNames.forEach((name, i) => {\n              if (name !== 'Serial No') {\n                d[name] = d[name] || d[pos[i]] || ''\n                d[name] = String(d[name])\n              }\n              if (name === 'subRows') d[name] = undefined\n            })\n            return d\n          })\n          const update = newDataSet.concat(stateData)\n\n          setData(update)\n        }\n        reader.readAsBinaryString(f)\n        break\n\n      default:\n        break\n    }\n  }\n\n  const defaultColumn = React.useMemo(\n    () => ({\n      // Let's set up our Filter UI\n      Filter: DefaultColumnFilter,\n      Cell: EditableCell,\n    }),\n    []\n  )\n\n  const renderTableSelect = (hooks) => {\n    hooks.visibleColumns.push((columns) => [\n      // Let's make a column for selection\n      {\n        id: 'selection',\n        // The header can use the table's getToggleAllRowsSelectedProps method\n        // to render a checkbox\n        Header: ({ getToggleAllPageRowsSelectedProps }) => (\n          <div>\n            <Checkbox {...getToggleAllPageRowsSelectedProps()} />\n          </div>\n        ),\n        // The cell can use the individual row's getToggleRowSelectedProps method\n        // to the render a checkbox\n        Cell: ({ row }) => (\n          <div>\n            <Checkbox {...row.getToggleRowSelectedProps()} />\n          </div>\n        ),\n      },\n      ...columns,\n    ])\n  }\n\n  const renderTableHeader = (column) => {\n    const header = column.render('Header')\n    return <>{header}</>\n  }\n  const renderTableRow = (page, prepareRow) => {\n    const renderTableCell = (cell) => {\n      if (cell.column.id === 'inviteSent') {\n        if (cell.row?.values?.inviteSent?.toLowerCase() === 'no')\n          return (\n            <div className=\"z-50 inline-flex items-center justify-center w-full h-full align-middle group\">\n              <span className=\"text-red-600\">{cell.render('Cell')}</span>\n              <span className=\"hidden align-middle group-focus:flex group-hover:flex align-center\">\n                <Dropdown\n                  buttonLabel={\n                    <FiMoreHorizontal className=\"flex self-center opacity-50\" />\n                  }\n                  className=\"z-20 ml-4\"\n                >\n                  <ul className=\"w-40 py-2 space-y-4 text-sm\">\n                    <li>\n                      <span\n                        className=\"cursor-pointer text-primary hover:underline\"\n                        title=\"components\"\n                        onClick={(e) => sendInvite(e, cell.row.values)}\n                      >\n                        <SiMinutemailer className=\"inline ml-6 mr-4\" />\n                        Send Invite\n                      </span>\n                    </li>\n                    <li>\n                      <hr className=\"dark:border-gray-700\" />\n                    </li>\n                    <li className=\"cursor-not-allowed\">\n                      <span\n                        className=\"text-primary hover:underline\"\n                        title=\"Typography\"\n                      >\n                        <MdMore className=\"inline ml-6 mr-4 \" />\n                        More Options\n                      </span>\n                    </li>\n                  </ul>\n                </Dropdown>\n              </span>\n            </div>\n          )\n        else\n          return (\n            <div className=\"inline-flex items-center justify-center w-full align-middle group\">\n              <span className=\"text-green-600\">{cell.render('Cell')}</span>\n            </div>\n          )\n      }\n      if (cell.column.id === 'testSent') {\n        if (cell.row.values?.testSent?.toLowerCase() === 'no')\n          return (\n            <div className=\"inline-flex items-center justify-center w-full text-red-600\">\n              {cell.render('Cell')}\n            </div>\n          )\n        else\n          return (\n            <div className=\"inline-flex items-center justify-center w-full text-green-600\">\n              {cell.render('Cell')}\n            </div>\n          )\n      }\n      if (cell.column.id === 'testStatus') {\n        if (cell.row?.values?.testStatus?.toLowerCase() === 'pending')\n          return (\n            <div className=\"inline-flex items-center justify-center w-full text-yellow-700\">\n              {cell.render('Cell')}\n            </div>\n          )\n        else\n          return (\n            <div className=\"inline-flex items-center justify-center w-full text-green-600\">\n              {cell.render('Cell')}\n            </div>\n          )\n      }\n      return cell.render('Cell')\n    }\n    return (\n      <>\n        {page.map((row, i) => {\n          prepareRow(row)\n          return (\n            <motion.tr\n              {...row.getRowProps({\n                layoutTransition: spring,\n                exit: { opacity: 0, maxHeight: 0 },\n              })}\n              className={`${i % 2 ? '' : ''} h-16`}\n            >\n              {row.cells.map((cell, i) => {\n                return (\n                  <motion.td\n                    {...cell.getCellProps({\n                      layoutTransition: spring,\n                    })}\n                    className={`${i % 2 ? 'bg-gray-5' : ''} h-16`}\n                  >\n                    {renderTableCell\n                      ? renderTableCell(cell)\n                      : cell.render('Cell')}\n                  </motion.td>\n                )\n              })}\n            </motion.tr>\n          )\n        })}\n      </>\n    )\n  }\n\n  const handleBatchActions = (controls) => {\n    const { state: tableState, selectedFlatRows } = controls\n    const { selectedRowIds } = tableState\n    const selectedLen = Object.keys(selectedRowIds || {}).length\n\n    const selectedMembers = selectedFlatRows.map((d) => d.original)\n    const uninvitedMembers = selectedMembers.filter(\n      (d) => d['testSent']?.toLowerCase() !== 'no'\n    )\n    const uninvitedLen = uninvitedMembers.length\n\n    return (\n      <div\n        className={`flex ${\n          selectedLen ? 'justify-between' : 'justify-end'\n        } w-full mb-2`}\n      >\n        {selectedLen > 0 && (\n          <>\n            <p>You have selected {selectedLen} members</p>\n            {uninvitedLen > 0 && (\n              <div>\n                <Button onClick={(e) => sendInvite(e, uninvitedMembers)}>\n                  Send Invitation to {uninvitedLen} members\n                </Button>\n              </div>\n            )}\n          </>\n        )}\n        {!selectedLen && (\n          <>\n            <UploadComponent\n              allowedExtensions={[\n                'xls',\n                'xlsx',\n                'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n              ]}\n              // autoUpload={true}\n              render={(el: HTMLElement | null) => {\n                return (\n                  <span\n                    className=\"flex justify-end w-full px-4 py-2 border cursor-pointer hover:text-primary-lighter hover:border-primary-darker text-primary\"\n                    onClick={(e) => {\n                      e.preventDefault()\n                      el && el.click()\n                    }}\n                  >\n                    <FaCloudUploadAlt className=\"w-6 h-6 mr-2\" />\n                    Upload SpreadSheet\n                  </span>\n                )\n              }}\n              uploadHandler={(data: any, state: any, cb: any) => {\n                uploadDatabase(state, 'spreadsheet')\n              }}\n            />\n            {/* <Button\n              type=\"secondary\"\n              className=\"self-end\"\n              onClick={(e) =>\n                uploadDatabase(e, uninvitedMembers, 'spreadsheet')\n              }\n            >\n              Upload SpreadSheet\n            </Button> */}\n          </>\n        )}\n      </div>\n    )\n  }\n\n  return (\n    <Layout\n      title=\"Your Awesome App\"\n      className=\"container max-w-5xl py-8 overflow-auto\"\n      header={headerSearch()}\n    >\n      {/* <ToastContainer /> */}\n\n      {/* <h1 className=\"mb-4 text-3xl font-black dark:text-gray-100\">Welcome</h1> */}\n      <p className=\"mb-4 text-lg font-light\">\n        Demo spreadsheet upload and email list system.\n      </p>\n      <div>\n        <TableComponent\n          columns={columns}\n          data={data}\n          setData={setData}\n          tableClassName=\"w-full\"\n          filterTypes={filterTypes}\n          defaultColumn={defaultColumn}\n          globalFilter={{ use: false, Component: GlobalFilter }}\n          renderHeader={renderTableHeader}\n          // renderFilter= {(column: unknown) => JSX.Element}\n          // renderTableBody={renderTableBody}\n          renderTableRow={renderTableRow}\n          // renderTableCell= {(cell: unknown) => JSX.Element}\n          handleTableControls={{ jsx: handleBatchActions }}\n          customHook={renderTableSelect}\n        />\n      </div>\n    </Layout>\n  )\n}\n\nexport default IndexPage\n"]},"metadata":{},"sourceType":"module"}